<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
    <title>Ally Survey</title>

</head>
<body>

    <div class="contrainer">
        <h1>Ally Survey</h1>

        <hr>

        <h3>Your Name</h3>
        <input type="text" id="name" class="form-control" required>

        <h3>Link to an image</h3>
        <input type="text" id="photo" class="form-control" required>

        <hr>

        <h3><strong>Rate how much you agree or disagree with the following statements</strong></h3>

        <hr><h4>The mainstream media intentionally and regularly publishes fake news to mislead the population.</h4>
	 	<select id="q1" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>Due to massive demographic changes foisted on the American people, the America we know and love doesn't exist anymore.</h4>
	 	<select id="q2" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>Historical marginalization and systemic racism are the main causes of the racial wealth gap.</h4>
	 	<select id="q3" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>Blacks and latinos on average scoring lower on IQ tests than white and asian people explains the racial disparity in the skilled labor market. </h4>
	 	<select id="q4" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>The IQ is BS. Racial Disparities in test results stem from environmental learning deficits that are connected to the racial disparities of poverty and educational funded impacted by continued systemic racism.</h4>
	 	<select id="q5" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>I change my mind based on what I see on social media. </h4>
	 	<select id="q6" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>There are more men in Science and technology field because the male mind is better suited for the industry.</h4>
	 	<select id="q7" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>The economy works best when it is least regulated.</h4>
	 	<select id="q8" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>Reducing income inequality should be a specific role of the government.</h4>
	 	<select id="q9" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <hr><h4>The US would be a better nation if every citizen was both informed on issues and voted in all elections.</h4>
	 	<select id="q10" class="question-select">
	 		<option value="">Please select one...</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

    <br>
<!-- SUMBMIT SURVET -->
    <button type="submit" class="btn btn-info btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button>
    <hr>
    <footer class ="footer">
        <div class="container">
            <p><a href="/api/allies">API Ally  List</a> | <a href="https://github.com/robxroy/allygorithm"></a></p>
        </div>
    </footer>

    </div>
    
        <!-- MODAL NOTIFICATION OF CLOSEST ALLY MATCH -->

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h1 class="modal-title">Closest Ally</h1>
            </div>
            <div class="modal-body">
                <h2 id="ally-name"></h2>
                <img id="ally-image">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close Pop-up</button>
            </div>
        </div>


        <script type="text/javascript">
            // Chosen CSS
        
        
            // Capture the form inputs
            $("#submit").on("click", function(event) {
              event.preventDefault();
        
              // Form validation
              function validateForm() {
                var isValid = true;
                $(".form-control").each(function() {
                  if ($(this).val() === "") {
                    isValid = false;
                  }
                });
        
                $(".chosen-select").each(function() {
        
                  if ($(this).val() === "") {
                    isValid = false;
                  }
                });
                return isValid;
              }
        
              // If all required fields are filled
              if (validateForm()) {
                // Create an object for the user"s data
                var userData = {
                  name: $("#name").val(),
                  photo: $("#photo").val(),
                  scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val()
                  ]
                };
        
                // AJAX post the data to the friends API.
                $.post("/api/friends", userData, function(data) {
        
                  // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                  $("#match-name").text(data.name);
                  $("#match-img").attr("src", data.photo);
        
                  // Show the modal with the best match
                  $("#results-modal").modal("toggle");
        
                });
              } else {
                alert("Please fill out all fields before submitting!");
              }
            });
          </script>

</body>
</html>